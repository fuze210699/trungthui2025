<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🌕 Trung Thu Vui Vẻ - Ghép Hình Bánh Trung Thu 🏮</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- EmailJS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  </head>
  <body>
    <!-- Audio Elements -->
    <audio id="background-music" loop preload="auto">
      <source src="sounds/thang_cuoi.mp3" type="audio/mpeg" />
    </audio>

    <!-- Music Control -->
    <div class="music-control">
      <button id="music-toggle" class="music-btn">
        <span class="music-icon">🎵</span>
      </button>
      <button id="test-wish-btn" class="test-btn" title="Test điều ước">
        <span>🧪</span>
      </button>
    </div>
    <!-- Background decorations -->
    <div class="floating-elements">
      <div class="floating-lantern lantern-1">🏮</div>
      <div class="floating-lantern lantern-2">🏮</div>
      <div class="floating-star star-1">⭐</div>
      <div class="floating-star star-2">✨</div>
      <div class="floating-star star-3">🌟</div>
      <div class="floating-cloud cloud-1">☁️</div>
      <div class="floating-cloud cloud-2">☁️</div>
    </div>

    <div class="moon-decoration">🌕</div>

    <div id="start-screen">
      <div class="welcome-container">
        <div class="title-decoration">
          <span class="lantern-left">🏮</span>
          <h1 class="main-title">
            <span class="title-line-1">Bé Vui</span>
            <span class="title-line-2">Trung Thu</span>
          </h1>
          <span class="lantern-right">�</span>
        </div>

        <div class="subtitle">
          <span class="rabbit-emoji">🐰</span>
          <span class="subtitle-text"
            >Ghép hình bánh trung thu cùng chú Cuội</span
          >
          <span class="rabbit-emoji">🐰</span>
        </div>

        <div class="mooncake-preview">
          <div class="preview-cake">🥮</div>
          <div class="preview-cake">🥮</div>
          <div class="preview-cake">🥮</div>
        </div>

        <button id="start-button" class="start-btn">
          <span class="btn-icon">🎮</span>
          <span class="btn-text">Bắt đầu chơi</span>
          <span class="btn-sparkle">✨</span>
        </button>

        <div class="instructions">
          <p>🎯 Tìm các cặp bánh trung thu giống nhau</p>
          <p>🏆 Hoàn thành để gửi điều ước lên cung trăng</p>
        </div>
      </div>
    </div>

    <div id="game-container" class="hidden">
      <div class="game-header">
        <h2 class="game-title">
          <span class="moon-icon">🌕</span>
          Ghép hình bánh trung thu
          <span class="moon-icon">🌕</span>
        </h2>
        <div class="score-container">
          <div class="score-item">
            <span class="score-icon">🎯</span>
            <span id="moves-count">0</span> nước đi
          </div>
          <div class="score-item">
            <span class="score-icon">⏱️</span>
            <span id="time-display">00:00</span>
          </div>
        </div>
      </div>
      <div id="game-board"></div>
      <button id="restart-button" class="restart-btn">
        <span>🔄 Chơi lại</span>
      </button>
    </div>

    <!-- Animation Screen - Điều ước bay lên trăng -->
    <div id="animation-screen" class="animation-screen hidden">
      <div class="animation-container">
        <!-- Background with gradient and particles -->
        <div class="magic-background">
          <div class="particle-layer">
            <div class="particle p1">✨</div>
            <div class="particle p2">🌟</div>
            <div class="particle p3">⭐</div>
            <div class="particle p4">✨</div>
            <div class="particle p5">🌟</div>
            <div class="particle p6">⭐</div>
            <div class="particle p7">✨</div>
            <div class="particle p8">🌟</div>
          </div>
        </div>

        <!-- Main Moon -->
        <div class="main-moon">
          <div class="moon-glow">🌕</div>
          <div class="moon-face">🌝</div>
        </div>

        <!-- Wish Orb -->
        <div class="wish-orb-container">
          <div class="wish-orb">
            <div class="orb-core">✨</div>
            <div class="orb-glow"></div>
            <div class="wish-text" id="wish-display"></div>
          </div>
        </div>

        <!-- Magic Trail -->
        <div class="magic-trail">
          <div class="trail-particle t1">✨</div>
          <div class="trail-particle t2">🌟</div>
          <div class="trail-particle t3">⭐</div>
          <div class="trail-particle t4">✨</div>
          <div class="trail-particle t5">🌟</div>
        </div>

        <!-- Bottom Character -->
        <div class="character-area">
          <div class="cute-cuoi">🐰</div>
          <div class="sending-hearts">
            <div class="heart h1">�</div>
            <div class="heart h2">�</div>
            <div class="heart h3">💖</div>
          </div>
        </div>

        <!-- Success Message -->
        <div class="success-message hidden">
          <div class="message-content">
            <h2>✨ Điều ước đã đến cung trăng! ✨</h2>
            <p>Chị Hằng đã nhận được điều ước của bé!</p>
          </div>
        </div>

        <!-- Controls -->
        <div class="animation-controls">
          <button id="skip-animation" class="skip-btn">⏩ Bỏ qua</button>
          <button id="back-to-game" class="back-btn hidden">🏠 Trở về</button>
        </div>
      </div>
    </div>

    <div id="win-modal" class="modal hidden">
      <div class="modal-content">
        <div class="celebration">
          <div class="confetti">🎉</div>
          <div class="confetti">🎊</div>
          <div class="confetti">✨</div>
        </div>

        <h2 class="win-title">
          <span class="trophy">🏆</span>
          Chúc mừng bé!
          <span class="trophy">🏆</span>
        </h2>

        <div class="win-stats">
          <div class="stat-item">
            <span class="stat-icon">⏱️</span>
            <span class="stat-label">Thời gian:</span>
            <span id="final-time" class="stat-value">-</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">🎯</span>
            <span class="stat-label">Số nước đi:</span>
            <span id="final-moves" class="stat-value">-</span>
          </div>
        </div>

        <div class="wish-section">
          <div class="wish-title">
            <span class="moon-emoji">🌙</span>
            <span>Hãy gửi điều ước lên cung trăng nhé!</span>
            <span class="star-emoji">⭐</span>
          </div>

          <div class="wish-input-container">
            <input
              type="text"
              id="wish-input"
              placeholder="Điều ước của bé..."
              maxlength="100"
            />
            <div class="input-decoration">✨</div>
          </div>

          <div class="modal-buttons">
            <button id="send-wish-button" class="send-wish-btn">
              <span class="btn-icon">🚀</span>
              <span>Gửi điều ước</span>
            </button>
            <button id="play-again-button" class="play-again-btn">
              <span class="btn-icon">🎮</span>
              <span>Chơi lại</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
